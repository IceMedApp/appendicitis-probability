<!DOCTYPE html>

<html>    
<head>
<link rel="stylesheet" href="index.css">
</head>

<body>
<h2>Appendicitis Calculation</h2>
<form onsubmit="return false">
    <p>
        <input id="crp" type="text" placeholder="Type in crp">
        <label for="crp">CRP (C-reactive protein, in mg/l)</label>
    </p>
    <p>
        <input id="wbc" type="text" placeholder="Type in wbc">
        <label for="wbc">WBC (White blood cell count / μl*1000)</label>
    </p>
    <p>
        <input id="duration" type="text" placeholder="Type in duration">
        <label for="duration">Duration of symptoms in days (1 for the first 24 hours, 2 for 25-48 hours and so on)</label>
    </p>
    <p>
        <input id="temperature" type="text" placeholder="Type in temperature">
        <label for="temperature">Temperature (in °C)</label>
    </p>
    <p>
        <input id="age" type="text" placeholder="Type in age">
        <label for="age">Age</label>
    </p>
    <p>
        <select id="gender">
            <option value="male">Male</option>
            <option value="female">Female</option>
            <option value="N/A">N/A</option>
        </select>
        <label for="gender">Gender</label>
    </p>
    <p>
        <input id="neutrophils" type="text" placeholder="Type in neutrophils">
        <label for="neutrophils">Neutrophil-to-Leukocyte Ratio in % (neutrophilic count / WBC)</label>
    </p>
    <p>
        <select id="pain_rlq">
            <option value="yes">Yes</option>
            <option value="no">No</option>
            <option selected value="N/A">N/A</option>
        </select>
        <label for="pain_rlq">Pain in right lower quadrant (RLQ)</label>
    </p>
    <p>
        <select id="rebound_tender">
            <option value="yes">Yes</option>
            <option value="no">No</option>
            <option selected value="N/A">N/A</option>
        </select>
        <label for="rebound_tender">Rebound tenderness</label>
    </p>
    <p>
        <select id="localization">
            <option value="yes">Yes</option>
            <option value="no">No</option>
            <option selected value="N/A">N/A</option>
        </select>
        <label for="localization">Migration of pain to the RLQ</label>
    </p>
    <p>
        <select id="anorexia">
            <option value="yes">Yes</option>
            <option value="no">No</option>
            <option selected value="N/A">N/A</option>
        </select>
        <label for="anorexia">Anorexia</label>
    </p>
    <p>
        <select id="nausea">
            <option value="yes">Yes</option>
            <option value="no">No</option>
            <option selected value="N/A">N/A</option>
        </select>
        <label for="nausea">Nausea</label>
    </p>
    <p>
        <select id="urine_analysis">
            <option value="yes">Yes</option>
            <option value="no">No</option>
            <option selected value="N/A">N/A</option>
        </select>
        <label for="urine_analysis">Was urine dipstick test performed?</label>
    </p>
    <p>
        <select id="rbc_select" disabled>
            <option value="yes">Yes</option>
            <option value="no">No</option>
            <option selected value="N/A">N/A</option>
        </select>
        <label for="rbc_select">Red blood cells in urine (RBC)</label>
    </p>
    <p>
        <select id="wbc_select" disabled>
            <option value="yes">Yes</option>
            <option value="no">No</option>
            <option selected value="N/A">N/A</option>
        </select>
        <label for="wbc_select">White blood cells in urine</label>
    </p>
    <p>
        <select id="culture" disabled>
            <option value="yes">Yes</option>
            <option value="no">No</option>
            <option selected value="N/A">N/A</option>
        </select>
        <label for="culture">Urine culture, if test not performed then “N/A”, if performed and positive for a bacterium that cause UTI (more than 1000 colonies) then “Yes” otherwise “No”</label>
    </p>
    <input id="submit" type="submit" value="Calculate"><br>
</form>

<br>
<div id="risk_factor_hidden" style="display:none;"></div>
<div id="app_prob_hidden" style="display:none;"></div>
<div class="row">
    <div class="column" style="background-color:#fc6f03;">
        <h2>Appendicitis</h2>
        <h4>Adjustment</h4>
        <p id="adjustment" type="text"></p>
        <h4>Probability before adjustment</h4>
        <p id="app_prob_before" type="text"></p>
        <h4>Probability</h4>
        <p id="app_prob" type="text"></p>
    </div>
    <div class="column" style="background-color:#6948fc;">
        <h2>Abscess</h2>
        <h4>Probability</h4>
        <p id="abs_prob" type="text"></p>
    </div>
    <div class="column" style="background-color:#01c031;">
        <h2>Perforation</h2>
        <h4>Probability</h4>
        <p id="per_prob" type="text"></p>
    </div>
</div>

<br>
<h2>Imaging</h2>
<p>
    If the calculated risk of appendicitis is somewhere between 5-90% then the patient would probably benefit from imaging (consider opting for ultrasound in young patients 0-40 years to decrease radiation dose to a sensitive population). 
    But if the risk is less than 5% it is reasonable to observe the patient, if the risk is more than 90% then it might be good to take the patient straight to surgery. 
    But because this model does not implement all the information the surgeon possesses so imaging should still be offered to patient with a calculated risk of appendicitis less than 5% or more than 90%, if the decision of surgery is dependent on the imaging results, despite low predicted PPV and NPV, respectively.
</p>
<form onsubmit="return false">
    <p>
        <select id="imaging">
            <option value="good">Experienced ultrasound operator</option>
            <option value="poor">Inexperienced ultrasound operator</option>
            <option value="ct">CT</option>
        </select>
        <label for="imaging">Imaging</label>
    </p>
    <p>
        <select id="appendix_visible">
            <option value="yes">Yes</option>
            <option value="no">No</option>
            <option value="N/A">N/A</option>
        </select>
        <label for="appendix_visible">Appendix visible?</label>
    </p>
    <input id="submit_imaging" type="submit" value="Calculate"><br>
</form>

<br>
<div class="row">
    <div class="column" style="background-color:#f721de;">
        <h2>Imaging</h2>
        <h4>PPV</h4>
        <p id="ppv" type="text"></p>
        <h4>NPV</h4>
        <p id="npv" type="text"></p>
        <h4>Accuracy</h4>
        <p id="accuracy" type="text"></p>
    </div>
    <div id="imaging_not_visible" style="display:none;" class="column">
        <h2>Appendix cannot be visualized</h2>
        <h4>New appendicitis probability</h4>
        <p id="app_prob_imaging" type="text"></p>
    </div>
</div>

<br>
<p>
    Disclaimers:

    This model was based on a single center retrospective study of N=1274 patients suspected of appendicitis and were 40 years or younger.

    When ultrasound was performed by an experienced operator and the appendix was not visualized N=47 then none of those reports indicated that the appendix was inflamed so sensitivity cannot be calculated so the sensitivity is based on an educated guess based on the proportion of sensitivity of total ultrasound performed by an experienced operator compared to an inexperienced operator.

    The new appendicitis probability after imaging when the appendix cannot be visualized is based on the prevalence seen in this study which was 19.70% for CT, 22.94% for ultrasound by an inexperienced operator and 8.51% for ultrasound performed by an experienced operator. The average appendicitis prevalence in this study was a little less than 41% for patients having imaging so the proportion of missed appendicitis was the prevalence after imaging divided by approximately 0.41. The new calculated constants were: 0.49 for CT, 0.57 for ultrasound with an inexperienced operator and 0,21 for ultrasound performed by an experienced operator. That number was then multiplied by the appendicitis probability calculated in the beginning of this model. 
    the reason the 1-NPV is not the same is that in some cases secondary findings indicated appendicitis despite the appendix not being visualized which affects the negative predictive value. 

    In this study the images were reevaluated by a radiologist to see how the sensitivity and specificity change after correcting for under diagnosed appendicitis, but because the appendix was often not images during ultrasound it is difficult to compare CT and Ultrasound after correcting for that bias so for this model the sensitivity and specificity are not corrected for diagnostic bias. 
</p>

<script type="module" src="functions/index.js"></script>

</body>
</html>

